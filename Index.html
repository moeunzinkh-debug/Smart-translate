<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Translator & SRT Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Kantumruy+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            background: radial-gradient(circle at top left, #1e293b, #0f172a);
            color: #f1f5f9;
            font-family: 'Kantumruy Pro', 'Inter', sans-serif;
            min-height: 100vh;
        }
        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }
        .nav-btn.active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
        }
        .input-area {
            background: rgba(15, 23, 42, 0.5);
            transition: all 0.3s ease;
        }
        .input-area:focus {
            background: rgba(15, 23, 42, 0.8);
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }
        .loading-ring {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #f1f5f9; 
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 10px; }
    </style>
</head>
<body class="p-4 sm:p-10">

    <div class="max-w-5xl mx-auto">
        <header class="text-center mb-10 space-y-3">
            <div class="inline-flex items-center justify-center p-3 bg-blue-600/20 rounded-2xl mb-2 border border-blue-500/30">
                <i data-lucide="sparkles" class="w-8 h-8 text-blue-400"></i>
            </div>
            <h1 class="text-4xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-300">
                á˜á‡áŸ’áˆá˜ááŸ’áŒá›á”á€á”áŸ’ášáŸ‚áœáŸƒá†áŸ’á›á¶á
            </h1>
            <p class="text-slate-400 font-light max-w-md mx-auto">á”á€á”áŸ’ášáŸ‚á—á¶áŸá¶á”á¶á“ášá áŸáŸ á“á·á„ááŸ’ášá¹á˜ááŸ’ášá¼áœáŸ”</p>
        </header>

        <nav class="flex justify-center mb-10">
            <div class="inline-flex p-1.5 bg-slate-800/50 backdrop-blur-md rounded-2xl border border-slate-700">
                <button id="navTranslator" onclick="showView('translatorView')" class="nav-btn px-6 py-2.5 rounded-xl flex items-center gap-2 text-sm font-semibold transition-all duration-300 active">
                    <i data-lucide="languages" class="w-4 h-4"></i> á€á˜áŸ’á˜áœá·á’á¸á”á€á”áŸ’ášáŸ‚
                </button>
                <button id="navSrtTiming" onclick="showView('srtTimingView')" class="nav-btn px-6 py-2.5 rounded-xl flex items-center gap-2 text-sm font-semibold text-slate-400 hover:text-white transition-all duration-300">
                    <i data-lucide="clock-rewind" class="w-4 h-4"></i> á€áŸ†áááŸ‹á–áŸá›áœáŸá›á¶ SRT
                </button>
            </div>
        </nav>

        <div id="translatorView" class="view-content transition-all duration-500">
            <div class="glass-card rounded-3xl p-6 sm:p-8">
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="space-y-3">
                        <div class="flex justify-between items-center px-1">
                            <span class="text-xs font-bold text-slate-500 uppercase tracking-widest">á¢ááŸ’áá”á‘áŠá¾á˜</span>
                            <select id="sourceLanguage" class="text-xs bg-slate-800 border border-slate-700 rounded-lg px-2 py-1 text-slate-300 outline-none cursor-pointer">
                                <option value="en">ğŸ‡ºğŸ‡¸ á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ (English)</option>
                                <option value="km">ğŸ‡°ğŸ‡­ á—á¶áŸá¶ááŸ’á˜áŸ‚áš (Khmer)</option>
                                <option value="zh">ğŸ‡¨ğŸ‡³ á—á¶áŸá¶á…á·á“ (Chinese)</option>
                                <option value="auto">âœ¨ áŸáŸ’áœáŸ‚á„ášá€á—á¶áŸá¶áŠáŸ„á™áŸáŸ’áœáŸá™á”áŸ’ášáœááŸ’áá·</option>
                            </select>
                        </div>
                        <textarea id="inputText" rows="10" class="w-full p-6 input-area border border-slate-700 rounded-3xl outline-none text-white placeholder-slate-600 font-light" placeholder="áœá¶á™á”á‰áŸ’á…á¼á›á¢ááŸ’áá”á‘áŠá¾á˜á‘á¸á“áŸáŸ‡..."></textarea>
                    </div>

                    <div class="space-y-3">
                        <div class="flex justify-between items-center px-1">
                            <span class="text-xs font-bold text-slate-500 uppercase tracking-widest">á›á‘áŸ’á’á•á›á”á€á”áŸ’ášáŸ‚</span>
                            <select id="targetLanguage" class="text-xs bg-slate-800 border border-slate-700 rounded-lg px-2 py-1 text-blue-400 font-bold outline-none cursor-pointer">
                                <option value="km">ğŸ‡°ğŸ‡­ á—á¶áŸá¶ááŸ’á˜áŸ‚áš (Khmer)</option>
                                <option value="en">ğŸ‡ºğŸ‡¸ á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ (English)</option>
                                <option value="zh">ğŸ‡¨ğŸ‡³ á—á¶áŸá¶á…á·á“ (Chinese)</option>
                            </select>
                        </div>
                        <textarea id="translatedOutput" rows="10" readonly class="w-full p-6 bg-slate-900/30 border border-slate-800 rounded-3xl text-blue-100 font-light focus:outline-none" placeholder="á›á‘áŸ’á’á•á›á“á¹á„á”á„áŸ’á á¶á‰á‘á¸á“áŸáŸ‡..."></textarea>
                    </div>
                </div>

                <div class="mt-8 flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-slate-800/50 pt-6">
                    <div class="flex gap-3">
                        <button onclick="copyTranslation()" class="flex items-center gap-2 px-6 py-3 bg-slate-800 hover:bg-slate-700 text-white font-semibold rounded-xl transition-all">
                            <i data-lucide="copy" class="w-4 h-4"></i> á…á˜áŸ’á›á„
                        </button>
                        <button onclick="clearTextAreas()" class="flex items-center gap-2 px-6 py-3 bg-red-900/20 hover:bg-red-900/40 text-red-400 font-semibold rounded-xl transition-all">
                            <i data-lucide="trash-2" class="w-4 h-4"></i> á›á»á”
                        </button>
                    </div>

                    <button id="translateBtn" onclick="generateTranslation()" class="w-full sm:w-auto px-12 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold rounded-2xl shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50">
                        <span id="translateLoadingIndicator" class="hidden loading-ring mr-2"></span>
                        <i data-lucide="zap" class="w-5 h-5"></i> á”á€á”áŸ’ášáŸ‚á¥á¡á¼áœá“áŸáŸ‡
                    </button>
                </div>
            </div>
        </div>

        <div id="srtTimingView" class="hidden view-content transition-all duration-500">
            <div class="glass-card rounded-3xl p-6 sm:p-8">
                <h2 class="text-xl font-bold mb-4">á˜á»áá„á¶áš SRT á€áŸ†á–á»á„ášáŸ€á”á…áŸ†...</h2>
            </div>
        </div>
    </div>

    <div id="messageBox" class="fixed inset-0 z-50 hidden flex items-center justify-center p-6 bg-slate-950/80 backdrop-blur-sm">
        <div class="glass-card max-w-sm w-full p-8 rounded-3xl text-center">
            <div id="msgIcon" class="mb-4 inline-flex p-4 rounded-full bg-blue-500/10 text-blue-400"></div>
            <h4 id="messageTitle" class="text-xl font-bold mb-2"></h4>
            <p id="messageContent" class="text-slate-400 mb-6 font-light"></p>
            <button onclick="hideMessage()" class="w-full py-3 bg-blue-600 text-white font-bold rounded-xl">á™á›áŸ‹á–áŸ’ášá˜</button>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Constants
        const API_KEY = "AIzaSyAiZODgbIIDVtUqGuWfiuKkGwODQ2cDYZs"; // á”á‰áŸ’á…á¼á› API Key ášá”áŸáŸ‹á¢áŸ’á“á€
        const MODEL_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

        function showView(viewId) {
            document.querySelectorAll('.view-content').forEach(v => v.classList.add('hidden'));
            document.getElementById(viewId).classList.remove('hidden');
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        function showMessage(title, content, isError = true) {
            document.getElementById('messageTitle').textContent = title;
            document.getElementById('messageContent').textContent = content;
            document.getElementById('messageBox').classList.remove('hidden');
            const iconDiv = document.getElementById('msgIcon');
            iconDiv.innerHTML = isError ? '<i data-lucide="alert-circle"></i>' : '<i data-lucide="check"></i>';
            lucide.createIcons();
        }

        function hideMessage() { document.getElementById('messageBox').classList.add('hidden'); }

        async function generateTranslation() {
            const inputText = document.getElementById('inputText').value.trim();
            if (!inputText) return showMessage("á€áŸ†á á»áŸ", "áŸá¼á˜á”á‰áŸ’á…á¼á›á¢ááŸ’áá”á‘áŠá¾á˜");

            const srcLang = document.getElementById('sourceLanguage').options[document.getElementById('sourceLanguage').selectedIndex].text;
            const targetLang = document.getElementById('targetLanguage').options[document.getElementById('targetLanguage').selectedIndex].text;
            
            const btn = document.getElementById('translateBtn');
            const outputArea = document.getElementById('translatedOutput');
            
            btn.disabled = true;
            outputArea.value = "á€áŸ†á–á»á„á”á€á”áŸ’ášáŸ‚...";

            const prompt = `Translate the following text from ${srcLang} to ${targetLang}. 
            Text: ${inputText}
            Note: Provide only the translated text.`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            try {
                const response = await fetch(MODEL_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const data = await response.json();
                if (data.candidates && data.candidates[0].content) {
                    outputArea.value = data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error("Invalid response");
                }
            } catch (error) {
                outputArea.value = "á€áŸ†á á»áŸáŸ– á˜á·á“á¢á¶á…á”á€á”áŸ’ášáŸ‚á”á¶á“á‘áŸáŸ” áŸá¼á˜á–á·á“á·ááŸ’á™ API Key á¬á¢áŸŠá¸á“á’áºáá·ááŸ”";
            } finally {
                btn.disabled = false;
            }
        }

        function copyTranslation() {
            const text = document.getElementById('translatedOutput').value;
            if(!text) return;
            navigator.clipboard.writeText(text);
            showMessage("á‡áŸ„á‚á‡áŸá™", "á”á¶á“á…á˜áŸ’á›á„á‘áŸ…á€á¶á“áŸ‹ Clipboard", false);
        }

        function clearTextAreas() {
            document.getElementById('inputText').value = '';
            document.getElementById('translatedOutput').value = '';
        }
    </script>
</body>
    </html>
